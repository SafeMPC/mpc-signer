# // Code generated by "make swagger"; DO NOT EDIT.
consumes:
- application/json
produces:
- application/json
swagger: "2.0"
info:
  description: API documentation
  title: github.com/kashguard/go-mpc-wallet
  version: 0.1.0
paths:
  /-/healthy:
    get:
      security:
      - Management: []
      description: |-
        This endpoint returns 200 when the service is healthy.
        Returns an human readable string about the current service status.
        In addition to readiness probes, it performs actual write probes.
        Note that /-/healthy is private (shielded by the mgmt-secret) as it may expose sensitive information about your service.
      produces:
      - text/plain
      tags:
      - common
      summary: Get healthy (liveness probe)
      operationId: GetHealthyRoute
      responses:
        "200":
          description: Ready.
        "521":
          description: Not ready.
  /-/ready:
    get:
      description: |-
        This endpoint returns 200 when the service is ready to serve traffic.
        Does read-only probes apart from the general server ready state.
        Note that /-/ready is typically public (and not shielded by a mgmt-secret), we thus prevent information leakage here and only return `"Ready."`.
      produces:
      - text/plain
      tags:
      - common
      summary: Get ready (readiness probe)
      operationId: GetReadyRoute
      responses:
        "200":
          description: Ready.
        "521":
          description: Not ready.
  /-/version:
    get:
      security:
      - Management: []
      description: This endpoint returns the module name, commit and build-date baked
        into the app binary.
      produces:
      - text/plain
      tags:
      - common
      summary: Get version
      operationId: GetVersionRoute
      responses:
        "200":
          description: ModuleName @ Commit (BuildDate)
  /.well-known/apple-app-site-association:
    get:
      description: Returns the Apple App Site Association file.
      tags:
      - well-known
      summary: Apple App Site Association
      operationId: GetAppleAppSiteAssociationRoute
      responses:
        "200":
          description: Apple App Site Association
  /.well-known/assetlinks.json:
    get:
      description: Returns the Android Digital Asset Links file.
      tags:
      - well-known
      summary: Android Digital Asset Links
      operationId: GetAndroidDigitalAssetLinksRoute
      responses:
        "200":
          description: Android Digital Asset Links
  /api/v1/auth/account:
    delete:
      security:
      - Bearer: []
      description: Completely delete the user account. This action is irreversible
        and therefore requires additional password authentication.
      tags:
      - auth
      summary: Delete user account
      operationId: DeleteUserAccountRoute
      parameters:
      - name: Payload
        in: body
        schema:
          $ref: '#/definitions/deleteUserAccountPayload'
      responses:
        "204":
          description: NoContent
        "400":
          description: PublicHTTPValidationError, type `INVALID_PASSWORD`
          schema:
            $ref: '#/definitions/publicHttpValidationError'
        "401":
          description: PublicHTTPError
          schema:
            $ref: '#/definitions/publicHttpError'
        "403":
          description: PublicHTTPError, type `USER_DEACTIVATED`/`NOT_LOCAL_USER`
          schema:
            $ref: '#/definitions/publicHttpError'
  /api/v1/auth/change-password:
    post:
      security:
      - Bearer: []
      description: |-
        After successful password change, all current access and refresh tokens are
        invalidated and a new set of auth tokens is returned
      tags:
      - auth
      summary: Change local user's password
      operationId: PostChangePasswordRoute
      parameters:
      - name: Payload
        in: body
        schema:
          $ref: '#/definitions/postChangePasswordPayload'
      responses:
        "200":
          description: PostLoginResponse
          schema:
            $ref: '#/definitions/postLoginResponse'
        "400":
          description: PublicHTTPValidationError, type `INVALID_PASSWORD`
          schema:
            $ref: '#/definitions/publicHttpValidationError'
        "401":
          description: PublicHTTPError
          schema:
            $ref: '#/definitions/publicHttpError'
        "403":
          description: PublicHTTPError, type `USER_DEACTIVATED`/`NOT_LOCAL_USER`
          schema:
            $ref: '#/definitions/publicHttpError'
  /api/v1/auth/forgot-password:
    post:
      description: |-
        Initiates a password reset for a local user, sending an email with a password
        reset link to the provided email address if a user account exists. Will always
        succeed, even if no user was found in order to prevent user enumeration
      tags:
      - auth
      summary: Initiate password reset for local user
      operationId: PostForgotPasswordRoute
      parameters:
      - name: Payload
        in: body
        schema:
          $ref: '#/definitions/postForgotPasswordPayload'
      responses:
        "204":
          description: Success
        "400":
          description: PublicHTTPValidationError
          schema:
            $ref: '#/definitions/publicHttpValidationError'
  /api/v1/auth/forgot-password/complete:
    post:
      description: |-
        Completes a password reset for a local user, using the password reset token sent via email
        to confirm user access, setting the new password if successful. All current access and refresh
        tokens are invalidated and a new set of auth tokens is returned
      tags:
      - auth
      summary: Completes password reset for local user
      operationId: PostForgotPasswordCompleteRoute
      parameters:
      - name: Payload
        in: body
        schema:
          $ref: '#/definitions/postForgotPasswordCompletePayload'
      responses:
        "200":
          description: PostLoginResponse
          schema:
            $ref: '#/definitions/postLoginResponse'
        "400":
          description: PublicHTTPValidationError, type `INVALID_PASSWORD`
          schema:
            $ref: '#/definitions/publicHttpValidationError'
        "403":
          description: PublicHTTPError, type `USER_DEACTIVATED`/`NOT_LOCAL_USER`
          schema:
            $ref: '#/definitions/publicHttpError'
        "404":
          description: PublicHTTPError, type `TOKEN_NOT_FOUND`
          schema:
            $ref: '#/definitions/publicHttpError'
        "409":
          description: PublicHTTPError, type `TOKEN_EXPIRED`
          schema:
            $ref: '#/definitions/publicHttpError'
  /api/v1/auth/login:
    post:
      description: Returns an access and refresh token on successful authentication
      tags:
      - auth
      summary: Login with local user
      operationId: PostLoginRoute
      parameters:
      - name: Payload
        in: body
        schema:
          $ref: '#/definitions/postLoginPayload'
      responses:
        "200":
          description: PostLoginResponse
          schema:
            $ref: '#/definitions/postLoginResponse'
        "400":
          description: PublicHTTPValidationError
          schema:
            $ref: '#/definitions/publicHttpValidationError'
        "401":
          description: PublicHTTPError
          schema:
            $ref: '#/definitions/publicHttpError'
        "403":
          description: PublicHTTPError, type `USER_DEACTIVATED`
          schema:
            $ref: '#/definitions/publicHttpError'
  /api/v1/auth/logout:
    post:
      security:
      - Bearer: []
      description: |-
        Logs the local user out, destroying the provided access token.
        A refresh token can optionally be provided, destroying it as well if found.
      tags:
      - auth
      summary: Log out local user
      operationId: PostLogoutRoute
      parameters:
      - name: Payload
        in: body
        schema:
          $ref: '#/definitions/postLogoutPayload'
      responses:
        "204":
          description: Success
        "400":
          description: PublicHTTPValidationError
          schema:
            $ref: '#/definitions/publicHttpValidationError'
        "401":
          description: PublicHTTPError
          schema:
            $ref: '#/definitions/publicHttpError'
  /api/v1/auth/refresh:
    post:
      description: |-
        Returns a fresh set of access and refresh tokens if a valid refresh token was provided.
        The old refresh token used to authenticate the request will be invalidated.
      tags:
      - auth
      summary: Refresh tokens
      operationId: PostRefreshRoute
      parameters:
      - name: Payload
        in: body
        schema:
          $ref: '#/definitions/postRefreshPayload'
      responses:
        "200":
          description: PostLoginResponse
          schema:
            $ref: '#/definitions/postLoginResponse'
        "400":
          description: PublicHTTPValidationError
          schema:
            $ref: '#/definitions/publicHttpValidationError'
        "401":
          description: PublicHTTPError
          schema:
            $ref: '#/definitions/publicHttpError'
        "403":
          description: PublicHTTPError, type `USER_DEACTIVATED`
          schema:
            $ref: '#/definitions/publicHttpError'
  /api/v1/auth/register:
    get:
      produces:
      - text/html
      tags:
      - auth
      summary: Page to complete registration
      operationId: GetCompleteRegisterRoute
      parameters:
      - type: string
        format: uuid4
        description: Registration token to complete the registration process
        name: token
        in: query
        required: true
      responses:
        "200":
          description: Page to complete registration
    post:
      description: |
        Registers a local user. If the registration process requires a confirmation
        the status code `202` is returned without auth tokens. Afterwards the registration needs to be confirmed
        using the `POST /api/v1/auth/register/{registrationToken}` endpoint.
      tags:
      - auth
      summary: Registers a local user
      operationId: PostRegisterRoute
      parameters:
      - name: Payload
        in: body
        schema:
          $ref: '#/definitions/postRegisterPayload'
      responses:
        "200":
          description: PostLoginResponse
          schema:
            $ref: '#/definitions/postLoginResponse'
        "202":
          description: RegisterResponse
          schema:
            $ref: '#/definitions/registerResponse'
        "400":
          description: PublicHTTPValidationError, type `INVALID_PASSWORD`
          schema:
            $ref: '#/definitions/publicHttpValidationError'
        "409":
          description: PublicHTTPError, type `USER_ALREADY_EXISTS`
          schema:
            $ref: '#/definitions/publicHttpError'
  /api/v1/auth/register/{registrationToken}:
    post:
      description: Completes registration for a local user
      tags:
      - auth
      summary: Complete registration
      operationId: PostCompleteRegisterRoute
      parameters:
      - type: string
        format: uuid4
        description: Registration token to complete the registration process
        name: registrationToken
        in: path
        required: true
      responses:
        "200":
          description: PostLoginResponse
          schema:
            $ref: '#/definitions/postLoginResponse'
        "401":
          description: Unauthorized
  /api/v1/auth/userinfo:
    get:
      security:
      - Bearer: []
      description: |-
        Returns user information compatible with the OpenID Connect Core 1.0 specification.
        Information returned depends on the requesting user as some data is only available if an app user profile exists.
      tags:
      - auth
      summary: Get user info
      operationId: GetUserInfoRoute
      responses:
        "200":
          description: GetUserInfoResponse
          schema:
            $ref: '#/definitions/getUserInfoResponse'
  /api/v1/mpc/keys:
    get:
      security:
      - Bearer: []
      description: 列出所有密钥，支持过滤和分页
      tags:
      - MPC Keys
      summary: 列出密钥
      operationId: getMpcKeys
      parameters:
      - type: string
        description: 链类型过滤
        name: chain_type
        in: query
      - type: string
        description: 状态过滤
        name: status
        in: query
      - maximum: 1000
        type: integer
        default: 50
        name: limit
        in: query
      - type: integer
        default: 0
        name: offset
        in: query
      responses:
        "200":
          description: 成功
          schema:
            $ref: '#/definitions/listKeysResponse'
        "401":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
        "500":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
    post:
      security:
      - Bearer: []
      description: 执行分布式密钥生成（DKG），创建密钥分片并分发到各个节点
      tags:
      - MPC Keys
      summary: 创建密钥分片
      operationId: postCreateMpcKey
      parameters:
      - name: body
        in: body
        required: true
        schema:
          $ref: '#/definitions/postCreateKeyPayload'
      responses:
        "201":
          description: 密钥创建成功
          schema:
            $ref: '#/definitions/createKeyResponse'
        "400":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
        "401":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
        "403":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
        "500":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
  /api/v1/mpc/keys/{keyId}:
    get:
      security:
      - Bearer: []
      description: 获取指定密钥的详细信息
      tags:
      - MPC Keys
      summary: 获取密钥信息
      operationId: getMpcKey
      parameters:
      - type: string
        name: keyId
        in: path
        required: true
      responses:
        "200":
          description: 成功
          schema:
            $ref: '#/definitions/getKeyResponse'
        "401":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
        "404":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
        "500":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
    delete:
      security:
      - Bearer: []
      description: 删除密钥及其所有分片
      tags:
      - MPC Keys
      summary: 删除密钥
      operationId: deleteMpcKey
      parameters:
      - type: string
        name: keyId
        in: path
        required: true
      responses:
        "200":
          description: 删除成功
        "401":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
        "403":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
        "404":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
        "500":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
  /api/v1/mpc/keys/{keyId}/address:
    post:
      security:
      - Bearer: []
      description: 根据密钥生成区块链地址
      tags:
      - MPC Keys
      summary: 生成地址
      operationId: postGenerateMpcKeyAddress
      parameters:
      - type: string
        name: keyId
        in: path
        required: true
      - type: string
        name: chain_type
        in: query
        required: true
      responses:
        "200":
          description: 成功
          schema:
            $ref: '#/definitions/generateAddressResponse'
        "401":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
        "404":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
        "500":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
  /api/v1/mpc/nodes:
    get:
      security:
      - Bearer: []
      description: 列出所有节点，支持过滤和分页
      tags:
      - MPC Nodes
      summary: 列出节点
      operationId: getMpcNodes
      parameters:
      - type: string
        description: 节点类型过滤
        name: node_type
        in: query
      - type: string
        description: 状态过滤
        name: status
        in: query
      - type: integer
        default: 50
        name: limit
        in: query
      - type: integer
        default: 0
        name: offset
        in: query
      responses:
        "200":
          description: 成功
          schema:
            $ref: '#/definitions/listNodesResponse'
        "401":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
        "500":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
    post:
      security:
      - Bearer: []
      description: 注册Coordinator或Participant节点
      tags:
      - MPC Nodes
      summary: 注册节点
      operationId: postRegisterMpcNode
      parameters:
      - name: body
        in: body
        required: true
        schema:
          $ref: '#/definitions/postRegisterNodePayload'
      responses:
        "201":
          description: 节点注册成功
          schema:
            $ref: '#/definitions/registerNodeResponse'
        "400":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
        "401":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
        "500":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
  /api/v1/mpc/nodes/{nodeId}:
    get:
      security:
      - Bearer: []
      description: 获取指定节点的详细信息
      tags:
      - MPC Nodes
      summary: 获取节点信息
      operationId: getMpcNode
      parameters:
      - type: string
        name: nodeId
        in: path
        required: true
      responses:
        "200":
          description: 成功
          schema:
            $ref: '#/definitions/getNodeResponse'
        "401":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
        "404":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
        "500":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
  /api/v1/mpc/nodes/{nodeId}/health:
    get:
      security:
      - Bearer: []
      description: 检查节点的健康状态
      tags:
      - MPC Nodes
      summary: 节点健康检查
      operationId: getMpcNodeHealth
      parameters:
      - type: string
        name: nodeId
        in: path
        required: true
      responses:
        "200":
          description: 成功
        "401":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
        "404":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
        "500":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
  /api/v1/mpc/sessions:
    post:
      security:
      - Bearer: []
      description: 创建新的签名会话
      tags:
      - MPC Sessions
      summary: 创建签名会话
      operationId: postCreateMpcSession
      parameters:
      - name: body
        in: body
        required: true
        schema:
          $ref: '#/definitions/postCreateSessionPayload'
      responses:
        "201":
          description: 会话创建成功
          schema:
            $ref: '#/definitions/createSessionResponse'
        "400":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
        "401":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
        "500":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
  /api/v1/mpc/sessions/{sessionId}:
    get:
      security:
      - Bearer: []
      description: 获取签名会话的当前状态
      tags:
      - MPC Sessions
      summary: 获取会话状态
      operationId: getMpcSession
      parameters:
      - type: string
        name: sessionId
        in: path
        required: true
      responses:
        "200":
          description: 成功
          schema:
            $ref: '#/definitions/getSessionResponse'
        "401":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
        "404":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
        "500":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
  /api/v1/mpc/sessions/{sessionId}/cancel:
    post:
      security:
      - Bearer: []
      description: 取消正在进行的签名会话
      tags:
      - MPC Sessions
      summary: 取消签名会话
      operationId: postCancelMpcSession
      parameters:
      - type: string
        name: sessionId
        in: path
        required: true
      responses:
        "200":
          description: 取消成功
        "401":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
        "404":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
        "500":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
  /api/v1/mpc/sessions/{sessionId}/join:
    post:
      security:
      - Bearer: []
      description: 节点加入签名会话
      tags:
      - MPC Sessions
      summary: 加入签名会话
      operationId: postJoinMpcSession
      parameters:
      - type: string
        name: sessionId
        in: path
        required: true
      - type: string
        name: node_id
        in: query
        required: true
      responses:
        "200":
          description: 加入成功
        "400":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
        "401":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
        "500":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
  /api/v1/mpc/sign:
    post:
      security:
      - Bearer: []
      description: 执行阈值签名，需要达到阈值的节点参与
      tags:
      - MPC Signing
      summary: 阈值签名
      operationId: postMpcSign
      parameters:
      - name: body
        in: body
        required: true
        schema:
          $ref: '#/definitions/postSignPayload'
      responses:
        "200":
          description: 签名成功
          schema:
            $ref: '#/definitions/signResponse'
        "400":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
        "401":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
        "403":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
        "500":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
  /api/v1/mpc/sign/batch:
    post:
      security:
      - Bearer: []
      description: 并发执行多个阈值签名请求
      tags:
      - MPC Signing
      summary: 批量阈值签名
      operationId: postMpcBatchSign
      parameters:
      - name: body
        in: body
        required: true
        schema:
          $ref: '#/definitions/postBatchSignPayload'
      responses:
        "200":
          description: 批量签名成功
          schema:
            $ref: '#/definitions/batchSignResponse'
        "400":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
        "401":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
        "403":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
        "500":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
  /api/v1/mpc/verify:
    post:
      security:
      - Bearer: []
      description: 验证签名的有效性
      tags:
      - MPC Signing
      summary: 验证签名
      operationId: postMpcVerify
      parameters:
      - name: body
        in: body
        required: true
        schema:
          $ref: '#/definitions/postVerifyPayload'
      responses:
        "200":
          description: 验证成功
          schema:
            $ref: '#/definitions/verifyResponse'
        "400":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
        "401":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
        "500":
          description: Standard error response
          schema:
            $ref: '#/definitions/publicHttpError'
  /api/v1/push/token:
    put:
      security:
      - Bearer: []
      description: |-
        Adds a push token for the given provider to the current user.
        If the oldToken is present it will be deleted.
        Currently only the provider 'fcm' is supported.
      tags:
      - push
      summary: Adds a push token to the user
      operationId: PutUpdatePushTokenRoute
      parameters:
      - name: Payload
        in: body
        schema:
          $ref: '#/definitions/putUpdatePushTokenPayload'
      responses:
        "200":
          description: OK
        "404":
          description: PublicHTTPError, type `OLD_PUSH_TOKEN_NOT_FOUND`
          schema:
            $ref: '#/definitions/publicHttpError'
        "409":
          description: PublicHTTPError, type `PUSH_TOKEN_ALREADY_EXISTS`
          schema:
            $ref: '#/definitions/publicHttpError'
  /swagger.yml:
    get:
      description: |-
        OpenAPI Specification ver. 2 (fka Swagger)
        Returns our handcrafted and validated `swagger.yml`.
      produces:
      - text/plain
      tags:
      - common
      summary: Get swagger.yml
      operationId: GetSwaggerRoute
      responses:
        "200":
          description: OK
definitions:
  batchSignResponse:
    type: object
    required:
    - signatures
    - total
    - success
    - failed
    properties:
      failed:
        type: integer
        example: 1
      signatures:
        type: array
        items:
          $ref: '#/definitions/signResponse'
      success:
        type: integer
        example: 9
      total:
        type: integer
        example: 10
  createKeyResponse:
    type: object
    required:
    - key_id
    - public_key
    - algorithm
    - curve
    - threshold
    - total_nodes
    - chain_type
    - status
    properties:
      address:
        type: string
        example: addr-0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb
      algorithm:
        type: string
        example: ECDSA
      chain_type:
        type: string
        example: ethereum
      created_at:
        type: string
        format: date-time
      curve:
        type: string
        example: secp256k1
      description:
        type: string
      key_id:
        type: string
        example: key-1234567890abcdef
      public_key:
        type: string
        example: pub-0x1234567890abcdef...
      status:
        type: string
        enum:
        - Active
        - Inactive
        - PendingDeletion
        - Deleted
        example: Active
      tags:
        type: object
        additionalProperties:
          type: string
      threshold:
        type: integer
        example: 2
      total_nodes:
        type: integer
        example: 3
  createSessionResponse:
    type: object
    required:
    - session_id
    - key_id
    - protocol
    - status
    - threshold
    - total_nodes
    properties:
      created_at:
        type: string
        format: date-time
      expires_at:
        type: string
        format: date-time
      key_id:
        type: string
      participating_nodes:
        type: array
        items:
          type: string
      protocol:
        type: string
      session_id:
        type: string
      status:
        type: string
      threshold:
        type: integer
      timeout:
        type: integer
      total_nodes:
        type: integer
  deleteUserAccountPayload:
    type: object
    required:
    - currentPassword
    properties:
      currentPassword:
        description: Current password of user
        type: string
        maxLength: 500
        minLength: 1
        example: correct horse battery staple
  generateAddressResponse:
    type: object
    required:
    - key_id
    - chain_type
    - address
    properties:
      address:
        type: string
        example: "0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb"
      chain_type:
        type: string
        example: ethereum
      key_id:
        type: string
        example: key-1234567890abcdef
  getKeyResponse:
    type: object
    required:
    - key_id
    - public_key
    - algorithm
    - curve
    - threshold
    - total_nodes
    - chain_type
    - status
    properties:
      address:
        type: string
      algorithm:
        type: string
      chain_type:
        type: string
      created_at:
        type: string
        format: date-time
      curve:
        type: string
      description:
        type: string
      key_id:
        type: string
      public_key:
        type: string
      status:
        type: string
      tags:
        type: object
        additionalProperties:
          type: string
      threshold:
        type: integer
      total_nodes:
        type: integer
      updated_at:
        type: string
        format: date-time
  getNodeResponse:
    type: object
    required:
    - node_id
    - node_type
    - status
    - endpoint
    properties:
      capabilities:
        type: array
        items:
          type: string
      endpoint:
        type: string
      last_heartbeat:
        type: string
        format: date-time
      metadata:
        type: object
        additionalProperties:
          type: string
      node_id:
        type: string
      node_type:
        type: string
      public_key:
        type: string
      registered_at:
        type: string
        format: date-time
      status:
        type: string
  getSessionResponse:
    type: object
    required:
    - session_id
    - key_id
    - protocol
    - status
    properties:
      completed_at:
        type: string
        format: date-time
      created_at:
        type: string
        format: date-time
      current_round:
        type: integer
      duration_ms:
        type: integer
      key_id:
        type: string
      participating_nodes:
        type: array
        items:
          type: string
      protocol:
        type: string
      session_id:
        type: string
      signature:
        type: string
      status:
        type: string
      threshold:
        type: integer
      total_nodes:
        type: integer
      total_rounds:
        type: integer
  getUserInfoResponse:
    type: object
    required:
    - sub
    - updated_at
    properties:
      email:
        description: Email address of user, if available
        type: string
        format: email
        maxLength: 255
        example: user@example.com
      scopes:
        description: Auth-Scopes of the user, if available
        type: array
        items:
          type: string
          enum:
          - app
          - cms
        example:
        - app
      sub:
        description: ID of user
        type: string
        example: 82ebdfad-c586-4407-a873-4cc1c33d56fc
      updated_at:
        description: Unix timestamp the user's info was last updated at
        type: integer
        example: 1591960808
  httpValidationErrorDetail:
    type: object
    required:
    - key
    - in
    - error
    properties:
      error:
        description: Error describing field validation failure
        type: string
      in:
        description: Indicates how the invalid field was provided
        type: string
      key:
        description: Key of field failing validation
        type: string
  listKeysResponse:
    type: object
    required:
    - keys
    properties:
      keys:
        type: array
        items:
          $ref: '#/definitions/getKeyResponse'
      limit:
        type: integer
      offset:
        type: integer
      total:
        type: integer
  listNodesResponse:
    type: object
    required:
    - nodes
    properties:
      limit:
        type: integer
      nodes:
        type: array
        items:
          $ref: '#/definitions/getNodeResponse'
      offset:
        type: integer
      total:
        type: integer
  orderDir:
    type: string
    enum:
    - asc
    - desc
  postBatchSignPayload:
    type: object
    required:
    - key_id
    - messages
    properties:
      chain_type:
        type: string
        example: ethereum
      key_id:
        type: string
        example: key-1234567890abcdef
      messages:
        type: array
        items:
          type: object
          required:
          - message
          properties:
            message:
              type: string
              format: byte
              example: SGVsbG8gV29ybGQ=
            message_type:
              type: string
              enum:
              - transaction
              - message
              - raw
              example: transaction
  postChangePasswordPayload:
    type: object
    required:
    - currentPassword
    - newPassword
    properties:
      currentPassword:
        description: Current password of user
        type: string
        maxLength: 500
        minLength: 1
        example: correct horse battery staple
      newPassword:
        description: New password to set for user
        type: string
        maxLength: 500
        minLength: 1
        example: correct horse battery staple
  postCreateKeyPayload:
    type: object
    required:
    - algorithm
    - curve
    - threshold
    - total_nodes
    - chain_type
    properties:
      algorithm:
        type: string
        enum:
        - ECDSA
        - EdDSA
        example: ECDSA
      chain_type:
        type: string
        enum:
        - bitcoin
        - ethereum
        - bsc
        - avalanche
        example: ethereum
      curve:
        type: string
        enum:
        - secp256k1
        - secp256r1
        - Ed25519
        example: secp256k1
      description:
        type: string
        example: 企业多签钱包密钥
      tags:
        type: object
        additionalProperties:
          type: string
        example:
          environment: production
          wallet_type: multisig
      threshold:
        type: integer
        minimum: 2
        example: 2
      total_nodes:
        type: integer
        minimum: 2
        example: 3
  postCreateSessionPayload:
    type: object
    required:
    - key_id
    - message
    properties:
      key_id:
        type: string
      message:
        type: string
        format: byte
      protocol:
        type: string
        enum:
        - gg18
        - gg20
        - frost
        example: gg20
      timeout:
        type: integer
        example: 300
  postForgotPasswordCompletePayload:
    type: object
    required:
    - token
    - password
    properties:
      password:
        description: New password to set for user
        type: string
        maxLength: 500
        minLength: 1
        example: correct horse battery staple
      token:
        description: Password reset token sent via email
        type: string
        format: uuid4
        example: ec16f032-3c44-4148-bbcc-45557466fa74
  postForgotPasswordPayload:
    type: object
    required:
    - username
    properties:
      username:
        description: Username to initiate password reset for
        type: string
        format: email
        maxLength: 255
        minLength: 1
        example: user@example.com
  postLoginPayload:
    type: object
    required:
    - username
    - password
    properties:
      password:
        description: Password of user to authenticate as
        type: string
        maxLength: 500
        minLength: 1
        example: correct horse battery staple
      username:
        description: Username of user to authenticate as
        type: string
        format: email
        maxLength: 255
        minLength: 1
        example: user@example.com
  postLoginResponse:
    type: object
    required:
    - access_token
    - token_type
    - expires_in
    - refresh_token
    properties:
      access_token:
        description: Access token required for accessing protected API endpoints
        type: string
        format: uuid4
        example: c1247d8d-0d65-41c4-bc86-ec041d2ac437
      expires_in:
        description: Access token expiry in seconds
        type: integer
        format: int64
        example: 86400
      refresh_token:
        description: Refresh token for refreshing the access token once it expires
        type: string
        format: uuid4
        example: 1dadb3bd-50d8-485d-83a3-6111392568f0
      token_type:
        description: Type of access token, will always be `bearer`
        type: string
        example: bearer
  postLogoutPayload:
    type: object
    properties:
      refresh_token:
        description: Optional refresh token to delete while logging out
        type: string
        format: uuid4
        example: 700ebed3-40f7-4211-bc83-a89b22b9875e
  postRefreshPayload:
    type: object
    required:
    - refresh_token
    properties:
      refresh_token:
        description: Refresh token to use for retrieving new token set
        type: string
        format: uuid4
        example: 7503cd8a-c921-4368-a32d-6c1d01d86da9
  postRegisterNodePayload:
    type: object
    required:
    - node_type
    - endpoint
    - public_key
    properties:
      capabilities:
        type: array
        items:
          type: string
        example:
        - gg18
        - gg20
      endpoint:
        type: string
        example: https://node-1.example.com:8080
      metadata:
        type: object
        additionalProperties:
          type: string
      node_id:
        type: string
      node_type:
        type: string
        enum:
        - coordinator
        - participant
        example: participant
      public_key:
        type: string
        example: pub-0x1234567890abcdef...
  postRegisterPayload:
    type: object
    required:
    - username
    - password
    properties:
      password:
        description: Password to register with
        type: string
        maxLength: 500
        minLength: 1
        example: correct horse battery staple
      username:
        description: Username to register with
        type: string
        format: email
        maxLength: 255
        minLength: 1
        example: user@example.com
  postSignPayload:
    type: object
    required:
    - key_id
    - message
    properties:
      chain_type:
        type: string
        example: ethereum
      key_id:
        type: string
        example: key-1234567890abcdef
      message:
        type: string
        format: byte
        example: SGVsbG8gV29ybGQ=
      message_type:
        type: string
        enum:
        - transaction
        - message
        - raw
        example: transaction
  postVerifyPayload:
    type: object
    required:
    - signature
    - public_key
    - message
    properties:
      algorithm:
        type: string
        enum:
        - ECDSA
        - EdDSA
        example: ECDSA
      chain_type:
        type: string
        example: ethereum
      message:
        type: string
        format: byte
        example: SGVsbG8gV29ybGQ=
      public_key:
        type: string
        example: pub-0x1234567890abcdef...
      signature:
        type: string
        example: 0x1234567890abcdef...
  publicHttpError:
    type: object
    required:
    - status
    - type
    - title
    properties:
      detail:
        description: More detailed, human-readable, optional explanation of the error
        type: string
        example: User is lacking permission to access this resource
      status:
        description: HTTP status code returned for the error
        type: integer
        format: int64
        maximum: 599
        minimum: 100
        x-go-name: Code
        example: 403
      title:
        description: Short, human-readable description of the error
        type: string
        example: Forbidden
      type:
        $ref: '#/definitions/publicHttpErrorType'
  publicHttpErrorType:
    description: Type of error returned, should be used for client-side error handling
    type: string
    enum:
    - generic
    - PUSH_TOKEN_ALREADY_EXISTS
    - OLD_PUSH_TOKEN_NOT_FOUND
    - ZERO_FILE_SIZE
    - USER_DEACTIVATED
    - INVALID_PASSWORD
    - NOT_LOCAL_USER
    - TOKEN_NOT_FOUND
    - TOKEN_EXPIRED
    - USER_ALREADY_EXISTS
    - MALFORMED_TOKEN
    - LAST_AUTHENTICATED_AT_EXCEEDED
    - MISSING_SCOPES
  publicHttpValidationError:
    type: object
    required:
    - validationErrors
    allOf:
    - $ref: '#/definitions/publicHttpError'
    properties:
      validationErrors:
        description: List of errors received while validating payload against schema
        type: array
        items:
          $ref: '#/definitions/httpValidationErrorDetail'
  putUpdatePushTokenPayload:
    type: object
    required:
    - newToken
    - provider
    properties:
      newToken:
        description: New push token for given provider.
        type: string
        maxLength: 500
        example: 1c91e550-8167-439c-8021-dee7de2f7e96
      oldToken:
        description: Old token that can be deleted if present.
        type: string
        maxLength: 500
        x-nullable: true
        example: 495179de-b771-48f0-aab2-8d23701b0f02
      provider:
        description: Identifier of the provider the token is for (eg. "fcm", "apn").
          Currently only "fcm" is supported.
        type: string
        maxLength: 500
        example: fcm
  registerNodeResponse:
    type: object
    required:
    - node_id
    - node_type
    - status
    - endpoint
    properties:
      capabilities:
        type: array
        items:
          type: string
      endpoint:
        type: string
      last_heartbeat:
        type: string
        format: date-time
      node_id:
        type: string
      node_type:
        type: string
      public_key:
        type: string
      registered_at:
        type: string
        format: date-time
      status:
        type: string
  registerResponse:
    type: object
    required:
    - requiresConfirmation
    properties:
      requiresConfirmation:
        description: Indicates whether the registration process requires email confirmation
        type: boolean
        example: true
  signResponse:
    type: object
    required:
    - signature
    - key_id
    - public_key
    - message
    - chain_type
    - session_id
    properties:
      chain_type:
        type: string
      key_id:
        type: string
      message:
        type: string
      participating_nodes:
        type: array
        items:
          type: string
      public_key:
        type: string
      session_id:
        type: string
      signature:
        type: string
        example: sig-0x1234567890abcdef...
      signed_at:
        type: string
        format: date-time
  verifyResponse:
    type: object
    required:
    - valid
    - public_key
    - verified_at
    properties:
      address:
        type: string
        example: "0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb"
      public_key:
        type: string
      valid:
        type: boolean
        example: true
      verified_at:
        type: string
        format: date-time
parameters:
  registrationTokenParam:
    type: string
    format: uuid4
    description: Registration token to complete the registration process
    name: registrationToken
    in: path
    required: true
responses:
  AuthForbiddenResponse:
    description: PublicHTTPError, type `USER_DEACTIVATED`/`NOT_LOCAL_USER`
    schema:
      $ref: '#/definitions/publicHttpError'
  AuthUnauthorizedResponse:
    description: PublicHTTPError
    schema:
      $ref: '#/definitions/publicHttpError'
  InvalidPasswordResponse:
    description: PublicHTTPValidationError, type `INVALID_PASSWORD`
    schema:
      $ref: '#/definitions/publicHttpValidationError'
  ValidationError:
    description: PublicHTTPValidationError
    schema:
      $ref: '#/definitions/publicHttpValidationError'
  errorResponse:
    description: Standard error response
    schema:
      $ref: '#/definitions/publicHttpError'
securityDefinitions:
  Bearer:
    description: |-
      Access token for application access, **must** include "Bearer " prefix.
      Example: `Bearer b4a94a42-3ea2-4af3-9699-8bcbfee6e6d2`
    type: apiKey
    name: Authorization
    in: header
    x-keyPrefix: 'Bearer '
  Management:
    description: Management secret, used for monitoring and infrastructure related
      calls
    type: apiKey
    name: mgmt-secret
    in: query
